<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>MyCLabs\ACL</title>

        <link rel="stylesheet" href="http://myclabs.github.io/ACL/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://myclabs.github.io/ACL/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="http://myclabs.github.io/ACL/css/main.css">

        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    </head>
    <body>
        <header class="navbar navbar-default navbar-fixed-top">
            <a class="navbar-brand" href="http://myclabs.github.io/ACL/">
                MyCLabs\ACL
                <small class="hidden-xs hidden-sm">
                    Powerful and efficient access control library for your PHP application.
                </small>
            </a>
            <a href="https://github.com/myclabs/ACL">
                <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
            </a>
        </header>

        <main>
            <div class="container-fluid">
                <div class="row">

                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <p class="text-muted">
                            Main documentation
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                            <li class="active">
                                <a href="http://myclabs.github.io/ACL/">
                                    Introduction
                                </a>
                            </li>
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/setup.html">
                                    Setup
                                </a>
                            </li>
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/usage.html">
                                    Usage
                                </a>
                            </li>
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/filtering-queries.html">
                                    Filtering queries
                                </a>
                            </li>
                        </ul>

                        <p class="text-muted">
                            Advanced topics
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/actions.html">
                                    Actions
                                </a>
                            </li>
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/cascading.html">
                                    Authorization cascading
                                </a>
                            </li>
                            <li class="">
                                <a href="http://myclabs.github.io/ACL/doc/performances.html">
                                    Performances
                                </a>
                            </li>
                        </ul>

                        <p>
                            <iframe class="github-star" src="http://ghbtns.com/github-btn.html?user=myclabs&repo=ACL&type=watch&count=true&size=large"
                                allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30"></iframe>
                        </p>

                    </nav>

                    <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                        <p><a href="https://travis-ci.org/myclabs/ACL"><img alt="Build Status" src="https://travis-ci.org/myclabs/ACL.png?branch=master" /></a> <a href="https://coveralls.io/r/myclabs/ACL"><img alt="Coverage Status" src="https://coveralls.io/repos/myclabs/ACL/badge.png" /></a> <a href="https://scrutinizer-ci.com/g/myclabs/ACL/"><img alt="Scrutinizer Code Quality" src="https://scrutinizer-ci.com/g/myclabs/ACL/badges/quality-score.png?s=2997ec4cb570c1cfef520d541daac853527d173e" /></a> <a href="https://packagist.org/packages/myclabs/acl"><img alt="Latest Stable Version" src="https://poser.pugx.org/myclabs/acl/v/stable.png" /></a> <a href="https://packagist.org/packages/myclabs/acl"><img alt="Total Downloads" src="https://poser.pugx.org/myclabs/acl/downloads.png" /></a> <a href="https://packagist.org/packages/myclabs/acl"><img alt="License" src="https://poser.pugx.org/myclabs/acl/license.png" /></a></p>
<p><strong>MyCLabs ACL is a library that helps managing permissions on your model.</strong></p>
<p>It is different from other ACL libraries in that it focuses on controlling access to your model classes
(Doctrine entities). As such, you access control model follows your real model, which makes it possible
to have access in cascade easily (e.g. if you can access a category, you can also access all
the sub-categories it contains).</p>
<p>It is also optimized as much as possible: authorizations are stored in database in a way to
allow very efficient filtering at the SQL level through Doctrine queries
(you can load only the objects a user can access). No other ACL system that we know of allows this.</p>
<p>Requirements:</p>
<ul>
<li>PHP 5.4</li>
<li>Use Doctrine as the ORM for your model</li>
<li>Doctrine 2.5 (currently in beta)</li>
</ul>
<p>Vocabulary:</p>
<ul>
<li><strong>Security identity</strong>: the entity which will be granted some access (this is generally the user)</li>
<li><strong>Resource</strong>: a <em>thing</em> to which we want to control the access</li>
<li><strong>Authorization</strong>: allows a security identity (user) to do something on a resource</li>
<li><strong>Role</strong>: a role gives authorizations to a user (e.g. an administrator, an article editor, a project owner, …)</li>
</ul>
<p>There are 2 kinds of resources:</p>
<ul>
<li>an entity (example: article #123)</li>
<li>all entities of a given type (example: all articles), which is represented by the classname of the entity</li>
</ul>
<h2>Overview</h2>
<p>We hate being lost and confused, so everything you have to do with ACL is done on the ACL service.
You can start by creating it:</p>
<pre><code class="language-php">// full configuration shown in the documentation
$acl = new ACL($entityManager);</code></pre>
<p>You give permissions to a user by adding it a role:</p>
<pre><code class="language-php">$acl-&gt;grant($user, new ArticleEditorRole($user, $article));</code></pre>
<p>Roles are classes that you write and which define the permissions a user has on a resource.</p>
<p>You remove permissions to a user by removing the role:</p>
<pre><code class="language-php">$acl-&gt;revoke($user, $role);</code></pre>
<p>Test permissions:</p>
<pre><code class="language-php">$acl-&gt;isAllowed($user, Actions::EDIT, $article);</code></pre>
<p>You can also filter your queries to get only the entities the user has access to:</p>
<pre><code class="language-php">$qb = $entityManager-&gt;createQueryBuilder();
$qb-&gt;select('article')-&gt;from('Model\Article', 'article');

ACLQueryHelper::joinACL($qb, $user, Actions::EDIT);

// This query will return only the articles the user can edit
$articles = $qb-&gt;getQuery()-&gt;getResult();</code></pre>
<h3>Features</h3>
<ul>
<li>stored in database (you don't need to handle persistence yourself)</li>
<li>extremely optimized:
<ul>
<li>filters queries at database level (you don't load entities the user can't access)</li>
<li>joins with only 1 extra table</li>
<li>bypasses Doctrine's ORM to insert authorizations in database (fast and efficient)</li>
<li>cascade delete at database level</li>
</ul>
</li>
<li>authorization cascading/inheritance</li>
<li>authorizations are rebuildable: you can change what an "ArticleEditor" can do afterwards and just rebuild the ACL</li>
<li>supports your custom actions on top of standard actions like "view", "edit", "delete", …</li>
</ul>
<h3>Limitations</h3>
<ul>
<li>because of Doctrine limitations you need to flush your resources before giving or testing authorizations</li>
<li>backed up by the database: testing <code>isAllowed</code> means one call to the database</li>
</ul>
                    </section>

                </div>
            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                $("section>p:first-child").addClass('lead');
                hljs.initHighlightingOnLoad();
            });
        </script>
    </body>
</html>
